<div class="container-fluid bg-light g-0">
  <div class="row min-vh-100">
    <!-- Sidebar Column -->
    <div class="col-lg-3 p-0 bg-white shadow-sm">
      <app-resources-sidebar></app-resources-sidebar>
    </div>

    <!-- Main Content Column -->
    <div class="col-lg-9 p-4 p-md-5">
      <header class="text-center mb-5">
        <h1 class="display-4 fw-bold text-dark mb-3">
          Frequently Asked Questions
        </h1>
        <p class="lead text-muted mx-auto" style="max-width: 700px">
          Find answers to the most common questions about Testly.
        </p>
      </header>

      <!-- Search Box -->
      <div class="row justify-content-center mb-5">
        <div class="col-md-8">
          <div class="input-group shadow-lg rounded-pill overflow-hidden">
            <input
              type="text"
              class="form-control form-control-lg border-0"
              placeholder="Search FAQs..."
              [(ngModel)]="searchQuery"
              (keyup.enter)="onSearch()"
            />
            <button class="btn btn-primary px-4" (click)="onSearch()">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- FAQ Categories -->
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="accordion" id="faqAccordion">
            @for (category of filteredCategories; track category.title; let i =
            $index) {
            <div
              class="accordion-item border-0 shadow-sm mb-3 rounded-3 overflow-hidden"
            >
              <h2 class="accordion-header">
                <button
                  class="accordion-button bg-light py-3 px-4 fs-4 fw-bold text-dark"
                  type="button"
                  (click)="toggleCategory(category.title)"
                  [attr.aria-expanded]="isCategoryActive(category.title)"
                >
                  {{ category.title }}
                </button>
              </h2>

              @if (isCategoryActive(category.title)) {
              <div class="accordion-collapse show">
                <div class="accordion-body p-0">
                  <div class="list-group list-group-flush">
                    @for (faq of category.faqs; track faq.question) {
                    <div class="list-group-item border-0 p-4">
                      <div class="d-flex mb-3">
                        <i
                          class="fas fa-question-circle text-primary fs-5 mt-1 me-3"
                        ></i>
                        <h3 class="h5 fw-bold mb-0">{{ faq.question }}</h3>
                      </div>
                      <div class="d-flex ps-4">
                        <i
                          class="fas fa-info-circle text-success fs-5 mt-1 me-3"
                        ></i>
                        <p class="text-muted mb-0">{{ faq.answer }}</p>
                      </div>
                    </div>
                    }
                  </div>
                </div>
              </div>
              }
            </div>
            } @if (filteredCategories.length === 0) {
            <div class="text-center py-5">
              <i class="fas fa-search fa-3x text-muted mb-3"></i>
              <h3 class="fw-bold mb-3">No results found</h3>
              <p class="text-muted">Try a different search term</p>
            </div>
            }
          </div>
        </div>
      </div>

      <!-- Still Need Help -->
      <section
        class="bg-primary bg-opacity-10 rounded-3 p-4 p-md-5 text-center mt-5"
      >
        <h2 class="fw-bold mb-3">Still Need Help?</h2>
        <p class="text-muted lead mb-4 mx-auto" style="max-width: 600px">
          Can't find the answer you're looking for? Please contact our friendly
          support team.
        </p>

        <div class="row g-3 justify-content-center">
          <div class="col-md-4">
            <a
              routerLink="/contact"
              class="card h-100 border-0 shadow-sm text-decoration-none hover-lift"
            >
              <div class="card-body p-4 text-center">
                <i class="fas fa-envelope text-primary fs-1 mb-3"></i>
                <h3 class="h5 fw-bold mb-0">Contact Support</h3>
              </div>
            </a>
          </div>

          <div class="col-md-4">
            <a
              routerLink="/resources/help-center"
              class="card h-100 border-0 shadow-sm text-decoration-none hover-lift"
            >
              <div class="card-body p-4 text-center">
                <i class="fas fa-book text-primary fs-1 mb-3"></i>
                <h3 class="h5 fw-bold mb-0">Help Center</h3>
              </div>
            </a>
          </div>

          <div class="col-md-4">
            <a
              routerLink="/resources/tutorials"
              class="card h-100 border-0 shadow-sm text-decoration-none hover-lift"
            >
              <div class="card-body p-4 text-center">
                <i class="fas fa-video text-primary fs-1 mb-3"></i>
                <h3 class="h5 fw-bold mb-0">Video Tutorials</h3>
              </div>
            </a>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
