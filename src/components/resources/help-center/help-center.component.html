<div class="container-fluid bg-light g-0">
  <div class="row min-vh-100">
    <!-- Sidebar Column -->
    <div class="col-lg-3 p-0 bg-white shadow-sm">
      <app-resources-sidebar></app-resources-sidebar>
    </div>

    <!-- Main Content Column -->
    <div class="col-lg-9 p-4 p-md-5">
      <header class="text-center mb-5">
        <h1 class="display-4 fw-bold text-dark mb-3">Help Center</h1>
        <p class="lead text-muted mx-auto mb-4" style="max-width: 700px">
          Get answers to your questions and learn how to make the most of
          Testly.
        </p>

        <!-- Search Box -->
        <div class="row justify-content-center">
          <div class="col-md-8">
            <div class="input-group shadow-lg rounded-pill overflow-hidden">
              <input
                type="text"
                class="form-control form-control-lg border-0"
                placeholder="Search for help articles..."
                [(ngModel)]="searchQuery"
                (keyup.enter)="onSearch()"
              />
              <button class="btn btn-primary px-4" (click)="onSearch()">
                <i class="fas fa-search me-2"></i> Search
              </button>
            </div>
          </div>
        </div>
      </header>

      <!-- Help Categories -->
      <section class="mb-5">
        @if (filteredCategories.length > 0) {
        <div class="row g-4">
          @for (category of filteredCategories; track category.title) {
          <div class="col-md-6">
            <div
              class="card h-100 border-0 shadow-sm transition-all hover-lift"
            >
              <div class="card-body p-4">
                <div class="d-flex align-items-center mb-3">
                  <div
                    class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3"
                    style="width: 60px; height: 60px"
                  >
                    <i class="fas fa-{{ category.icon }} text-white fs-4"></i>
                  </div>
                  <h2 class="h4 fw-bold mb-0">{{ category.title }}</h2>
                </div>
                <p class="text-muted mb-3">{{ category.description }}</p>

                <div class="mb-3">
                  @for (article of category.articles; track article.title) {
                  <a
                    [routerLink]="article.link"
                    class="d-flex align-items-center text-decoration-none text-dark mb-2 p-2 rounded hover-bg-light"
                  >
                    <i class="fas fa-file-alt text-primary me-3"></i>
                    <span>{{ article.title }}</span>
                  </a>
                  }
                </div>

                <a
                  [routerLink]="
                    '/help/categories/' +
                    category.title.toLowerCase().replace(' ', '-')
                  "
                  class="d-inline-flex align-items-center text-primary fw-bold text-decoration-none mt-auto"
                >
                  View all articles
                  <i class="fas fa-arrow-right ms-2 transition-all"></i>
                </a>
              </div>
            </div>
          </div>
          }
        </div>
        } @else {
        <div class="text-center py-5">
          <i class="fas fa-search fa-3x text-muted mb-3"></i>
          <h3 class="fw-bold mb-3">No results found</h3>
          <p class="text-muted">Try a different search term</p>
        </div>
        }
      </section>

      <!-- Contact Support -->
      <section
        class="bg-primary bg-opacity-10 rounded-3 p-4 p-md-5 text-center"
      >
        <h2 class="fw-bold mb-3">Can't find what you're looking for?</h2>
        <p class="text-muted lead mb-4 mx-auto" style="max-width: 600px">
          Our support team is here to help you with any questions or issues you
          might have.
        </p>
        <a
          routerLink="/contact"
          class="btn btn-primary btn-lg px-4 rounded-pill fw-bold"
        >
          Contact Support <i class="fas fa-chevron-right ms-2"></i>
        </a>
      </section>
    </div>
  </div>
</div>
