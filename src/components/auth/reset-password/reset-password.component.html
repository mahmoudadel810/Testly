<!-- @format -->

<div class="auth-container">
  <div class="auth-card">
    <h2>Reset Password</h2>
    <form (ngSubmit)="onSubmit()" #resetForm="ngForm">
      <div class="form-group">
        <label for="code">Reset Code</label>
        <input type="text" id="code" name="code" class="form-control" [(ngModel)]="code" required />
        @if (codeError) {
        <div class="error-text">{{ codeError }}</div>
        }
      </div>
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <div class="password-input-wrapper">
  <input [type]="showNewPassword ? 'text' : 'password'" id="newPassword" name="newPassword" class="form-control" [(ngModel)]="newPassword" required />
  <span class="password-toggle-icon" role="button" tabindex="0" aria-label="Toggle new password visibility" (click)="toggleNewPasswordVisibility()" (keydown.enter)="toggleNewPasswordVisibility()" (keydown.space)="toggleNewPasswordVisibility()">
    <i class="bi" [ngClass]="showNewPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
  </span>
</div>
        @if (passwordError) {
        <div class="error-text">{{ passwordError }}</div>
        }
      </div>
      <div class="form-group">
        <label for="confirmNewPassword">Confirm New Password</label>
        <div class="password-input-wrapper">
  <input [type]="showConfirmNewPassword ? 'text' : 'password'" id="confirmNewPassword" name="confirmNewPassword" class="form-control" [(ngModel)]="confirmNewPassword" required />
  <span class="password-toggle-icon" role="button" tabindex="0" aria-label="Toggle confirm new password visibility" (click)="toggleConfirmNewPasswordVisibility()" (keydown.enter)="toggleConfirmNewPasswordVisibility()" (keydown.space)="toggleConfirmNewPasswordVisibility()">
    <i class="bi" [ngClass]="showConfirmNewPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
  </span>
</div>
        @if (confirmPasswordError) {
        <div class="error-text">
          {{ confirmPasswordError }}
        </div>
        }
      </div>
      <button class="btn-primaryCSS btn-block" type="submit"
        [disabled]="isLoading || !code || !newPassword || !confirmNewPassword">
        {{ isLoading ? "Resetting..." : "Reset Password" }}
      </button>
    </form>
    @if (message) {
    <div class="alert alert-success">{{ message }}</div>
    }
    @if (error) {
    <div class="alert alert-error">{{ error }}</div>
    }
  </div>
</div>
